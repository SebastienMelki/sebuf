{"components":{"schemas":{"BarsEntry":{"properties":{"key":{"type":"string"},"value":{"$ref":"#/components/schemas/OptionBar"}},"type":"object"},"FieldViolation":{"description":"FieldViolation describes a single validation error for a specific field.","properties":{"description":{"description":"Human-readable description of the validation violation (e.g., 'must be a valid email address', 'required field missing')","type":"string"},"field":{"description":"The field path that failed validation (e.g., 'user.email' for nested fields). For header validation, this will be the header name (e.g., 'X-API-Key')","type":"string"}},"required":["field","description"],"type":"object"},"GetLatestOptionBarsRequest":{"description":"GetLatestOptionBarsRequest is the request to get the latest option bars.","properties":{"feed":{"description":"Data feed (indicative, opra).","enum":["indicative","opra"],"example":"opra","examples":["opra","indicative"],"type":"string"},"symbols":{"description":"Comma-separated list of option symbols.","example":"TSLA260123C00335000","examples":["TSLA260123C00335000"],"type":"string"}},"required":["symbols"],"type":"object"},"GetLatestOptionBarsResponse":{"description":"GetLatestOptionBarsResponse contains the latest option bar for each symbol.","properties":{"bars":{"additionalProperties":{"$ref":"#/components/schemas/OptionBar"},"description":"Map of symbol to latest bar.","type":"object"}},"type":"object"},"GetOptionBarsRequest":{"description":"GetOptionBarsRequest is the request to get historical option bars.","properties":{"end":{"description":"End timestamp (RFC 3339 or YYYY-MM-DD).","example":"2025-12-31","examples":["2025-12-31","2025-12-15T16:00:00Z"],"type":"string"},"limit":{"description":"Maximum number of bars to return (1-10000, default 1000).","example":100,"examples":[100,1000],"format":"int32","maximum":10000,"minimum":1,"type":"integer"},"pageToken":{"description":"Page token for pagination.","example":"dG9rZW4xMjM=","examples":["dG9rZW4xMjM="],"type":"string"},"sort":{"description":"Sort order (asc, desc).","enum":["asc","desc"],"example":"asc","examples":["asc","desc"],"type":"string"},"start":{"description":"Start timestamp (RFC 3339 or YYYY-MM-DD).","example":"2025-12-01","examples":["2025-12-01","2025-12-15T09:30:00Z"],"type":"string"},"symbols":{"description":"Comma-separated list of option symbols in OCC format.","example":"TSLA260123C00335000","examples":["TSLA260123C00335000","AAPL240119C00150000,AAPL240119P00145000"],"type":"string"},"timeframe":{"description":"Bar timeframe (e.g., 1Min, 5Min, 1Hour, 1Day).","example":"1Day","examples":["1Day","1Hour","5Min"],"type":"string"}},"required":["symbols","timeframe"],"type":"object"},"GetOptionBarsResponse":{"description":"GetOptionBarsResponse contains the option bars data.\n The map values use the unwrap annotation for cleaner JSON serialization:\n {\"bars\": {\"TSLA260123C00335000\": [...bars...]}} instead of {\"bars\": {\"TSLA260123C00335000\": {\"bars\": [...]}}}","properties":{"bars":{"additionalProperties":{"items":{"$ref":"#/components/schemas/OptionBar"},"type":"array"},"description":"Map of symbol to list of bars. Each symbol maps directly to an array of bars.","type":"object"},"nextPageToken":{"description":"Next page token for pagination, null if no more pages.","example":"eyJwYWdlIjogMn0=","examples":["eyJwYWdlIjogMn0="],"type":"string"}},"type":"object"},"OptionBar":{"description":"OptionBar represents an option OHLCV bar data point.","properties":{"c":{"description":"Close price.","example":143.08,"examples":[143.08,145.34],"format":"double","type":"number"},"false":{"description":"Number of trades.","example":1,"examples":[1],"format":"int64","type":"integer"},"h":{"description":"High price.","example":143.08,"examples":[143.08,145.34],"format":"double","type":"number"},"l":{"description":"Low price.","example":143.08,"examples":[143.08,145.34],"format":"double","type":"number"},"o":{"description":"Open price.","example":143.08,"examples":[143.08,145.34],"format":"double","type":"number"},"t":{"description":"Timestamp in RFC 3339 format.","example":"2025-12-15T15:05:00Z","examples":["2025-12-15T15:05:00Z","2025-12-15T18:05:00Z"],"type":"string"},"v":{"description":"Volume.","example":1,"examples":[1,20],"format":"int64","type":"integer"},"vw":{"description":"Volume weighted average price.","example":143.08,"examples":[143.08,145.34],"format":"double","type":"number"}},"type":"object"},"OptionBarsList":{"description":"OptionBarsList is a wrapper for a list of bars that will be unwrapped in JSON.\n This enables map values to serialize as arrays instead of nested objects.","properties":{"bars":{"items":{"$ref":"#/components/schemas/OptionBar"},"type":"array"}},"type":"object"},"ValidationError":{"description":"ValidationError is returned when request validation fails. It contains a list of field violations describing what went wrong.","properties":{"violations":{"description":"List of validation violations","items":{"$ref":"#/components/schemas/FieldViolation"},"type":"array"}},"required":["violations"],"type":"object"}}},"info":{"title":"MarketDataService API","version":"1.0.0"},"openapi":"3.1.0","paths":{"/v2/options/bars":{"get":{"description":"GetOptionBars retrieves historical option bars for the specified symbols.","operationId":"GetOptionBars","parameters":[{"description":"Alpaca API key ID for authentication","in":"header","name":"APCA-API-KEY-ID","required":true,"schema":{"example":"PKXXXXXXXXXXXXXXXX","type":"string"}},{"description":"Alpaca API secret key for authentication","in":"header","name":"APCA-API-SECRET-KEY","required":true,"schema":{"example":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","type":"string"}},{"description":"Comma-separated list of option symbols in OCC format.","in":"query","name":"symbols","required":false,"schema":{"type":"string"}},{"description":"Bar timeframe (e.g., 1Min, 5Min, 1Hour, 1Day).","in":"query","name":"timeframe","required":false,"schema":{"type":"string"}},{"description":"Start timestamp (RFC 3339 or YYYY-MM-DD).","in":"query","name":"start","required":false,"schema":{"type":"string"}},{"description":"End timestamp (RFC 3339 or YYYY-MM-DD).","in":"query","name":"end","required":false,"schema":{"type":"string"}},{"description":"Maximum number of bars to return (1-10000, default 1000).","in":"query","name":"limit","required":false,"schema":{"format":"int32","type":"integer"}},{"description":"Page token for pagination.","in":"query","name":"page_token","required":false,"schema":{"type":"string"}},{"description":"Sort order (asc, desc).","in":"query","name":"sort","required":false,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetOptionBarsResponse"}}},"description":"Successful response"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationError"}}},"description":"Validation error"},"default":{"content":{"application/json":{"schema":{"properties":{"code":{"type":"integer"},"error":{"type":"string"}},"type":"object"}}},"description":"Error response"}},"summary":"GetOptionBars","tags":["MarketDataService"]}},"/v2/options/bars/latest":{"get":{"description":"GetLatestOptionBars retrieves the latest option bar for each symbol.","operationId":"GetLatestOptionBars","parameters":[{"description":"Alpaca API key ID for authentication","in":"header","name":"APCA-API-KEY-ID","required":true,"schema":{"example":"PKXXXXXXXXXXXXXXXX","type":"string"}},{"description":"Alpaca API secret key for authentication","in":"header","name":"APCA-API-SECRET-KEY","required":true,"schema":{"example":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","type":"string"}},{"description":"Comma-separated list of option symbols.","in":"query","name":"symbols","required":false,"schema":{"type":"string"}},{"description":"Data feed (indicative, opra).","in":"query","name":"feed","required":false,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetLatestOptionBarsResponse"}}},"description":"Successful response"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationError"}}},"description":"Validation error"},"default":{"content":{"application/json":{"schema":{"properties":{"code":{"type":"integer"},"error":{"type":"string"}},"type":"object"}}},"description":"Error response"}},"summary":"GetLatestOptionBars","tags":["MarketDataService"]}}}}