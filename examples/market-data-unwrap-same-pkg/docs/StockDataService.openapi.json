{"components":{"schemas":{"BarsEntry":{"properties":{"key":{"type":"string"},"value":{"$ref":"#/components/schemas/StockBarsList"}},"type":"object"},"FieldViolation":{"description":"FieldViolation describes a single validation error for a specific field.","properties":{"description":{"description":"Human-readable description of the validation violation (e.g., 'must be a valid email address', 'required field missing')","type":"string"},"field":{"description":"The field path that failed validation (e.g., 'user.email' for nested fields). For header validation, this will be the header name (e.g., 'X-API-Key')","type":"string"}},"required":["field","description"],"type":"object"},"GetStockBarsRequest":{"description":"GetStockBarsRequest is the request to get historical stock bars.","properties":{"end":{"description":"End timestamp (RFC 3339 or YYYY-MM-DD).","example":"2025-12-31","examples":["2025-12-31"],"type":"string"},"limit":{"description":"Maximum number of bars to return.","example":100,"examples":[100],"format":"int32","maximum":10000,"minimum":1,"type":"integer"},"start":{"description":"Start timestamp (RFC 3339 or YYYY-MM-DD).","example":"2025-12-01","examples":["2025-12-01"],"type":"string"},"symbols":{"description":"Comma-separated list of stock symbols.","example":"AAPL,GOOG,MSFT","examples":["AAPL,GOOG,MSFT"],"type":"string"},"timeframe":{"description":"Bar timeframe (e.g., 1Min, 5Min, 1Hour, 1Day).","example":"1Day","examples":["1Day"],"type":"string"}},"required":["symbols","timeframe"],"type":"object"},"GetStockBarsResponse":{"description":"GetStockBarsResponse contains the stock bars data.\n The map values use the unwrap annotation for cleaner JSON serialization:\n {\"bars\": {\"AAPL\": [...bars...]}} instead of {\"bars\": {\"AAPL\": {\"bars\": [...]}}}\n\n IMPORTANT: StockBarsList is imported from stock_bar.proto which is in the SAME\n Go package but a DIFFERENT file. This tests same-package-different-file unwrap resolution.","properties":{"bars":{"additionalProperties":{"$ref":"#/components/schemas/StockBarsList"},"description":"Map of symbol to list of bars. Each symbol maps directly to an array of bars.","type":"object"},"nextPageToken":{"description":"Next page token for pagination, null if no more pages.","type":"string"}},"type":"object"},"StockBar":{"description":"StockBar represents a stock OHLCV bar data point.","properties":{"c":{"description":"Close price.","example":144.25,"examples":[144.25],"format":"double","type":"number"},"h":{"description":"High price.","example":145,"examples":[145],"format":"double","type":"number"},"l":{"description":"Low price.","example":142.5,"examples":[142.5],"format":"double","type":"number"},"o":{"description":"Open price.","example":143.08,"examples":[143.08],"format":"double","type":"number"},"t":{"description":"Timestamp in RFC 3339 format.","example":"2025-12-15T15:05:00Z","examples":["2025-12-15T15:05:00Z"],"type":"string"},"v":{"description":"Volume.","example":1000000,"examples":[1000000],"format":"int64","type":"integer"}},"type":"object"},"StockBarsList":{"description":"StockBarsList is a wrapper for a list of bars that will be unwrapped in JSON.\n This enables map values to serialize as arrays instead of nested objects.\n\n IMPORTANT: This message is in a DIFFERENT FILE but SAME PACKAGE as the service\n that uses it. This tests the same-package-different-file unwrap resolution.","properties":{"bars":{"items":{"$ref":"#/components/schemas/StockBar"},"type":"array"}},"type":"object"},"ValidationError":{"description":"ValidationError is returned when request validation fails. It contains a list of field violations describing what went wrong.","properties":{"violations":{"description":"List of validation violations","items":{"$ref":"#/components/schemas/FieldViolation"},"type":"array"}},"required":["violations"],"type":"object"}}},"info":{"title":"StockDataService API","version":"1.0.0"},"openapi":"3.1.0","paths":{"/v1/stocks/bars":{"get":{"description":"GetStockBars retrieves historical stock bars for the specified symbols.","operationId":"GetStockBars","parameters":[{"description":"API key for authentication","in":"header","name":"X-API-Key","required":true,"schema":{"example":"sk_live_xxxxx","type":"string"}},{"description":"Comma-separated list of stock symbols.","in":"query","name":"symbols","required":false,"schema":{"type":"string"}},{"description":"Bar timeframe (e.g., 1Min, 5Min, 1Hour, 1Day).","in":"query","name":"timeframe","required":false,"schema":{"type":"string"}},{"description":"Start timestamp (RFC 3339 or YYYY-MM-DD).","in":"query","name":"start","required":false,"schema":{"type":"string"}},{"description":"End timestamp (RFC 3339 or YYYY-MM-DD).","in":"query","name":"end","required":false,"schema":{"type":"string"}},{"description":"Maximum number of bars to return.","in":"query","name":"limit","required":false,"schema":{"format":"int32","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetStockBarsResponse"}}},"description":"Successful response"},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationError"}}},"description":"Validation error"},"default":{"content":{"application/json":{"schema":{"properties":{"code":{"type":"integer"},"error":{"type":"string"}},"type":"object"}}},"description":"Error response"}},"summary":"GetStockBars","tags":["StockDataService"]}}}}